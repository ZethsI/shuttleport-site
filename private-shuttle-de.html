<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Buchen Sie einen privaten Shuttle mit ShuttlePort fÃ¼r eine komfortable, sichere und luxuriÃ¶se Transfererfahrung.">
  <title>Privater Shuttle | ShuttlePort</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    * { box-sizing: border-box; padding-left: 10px; padding-right: 10px; }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f4f4f4; color: #333; }
    header, footer { background: #003366; color: #fff; padding: 0.25rem 0; text-align: center; }
    nav ul { list-style: none; display: flex; justify-content: center; flex-wrap: wrap; gap: 1.5rem; }
    nav a {
      color: white;
      text-decoration: none;
      font-weight: 400;
    }
    nav a:hover { text-decoration: underline; }
    .language-selector { position: absolute; top: 1rem; right: 1rem; }
    .language-selector select { padding: 0.5rem; border-radius: 5px; border: none; }
    main { max-width: 1000px; margin: auto; padding: 2rem; background: #fff; }
    section { margin-bottom: 2rem; }
    h2 { color: #003366; margin-bottom: 1rem; }
    form input, form textarea, form select { width: 100%; padding: 0.75rem; margin-bottom: 1rem; border: 1px solid #ccc; border-radius: 5px; }
    form button { background: #003366; color: white; padding: 0.75rem 1.5rem; border: none; border-radius: 5px; cursor: pointer; }
    form button:hover { background: #0055aa; }
    iframe { width: 100%; height: 300px; border: none; margin-top: 1rem; }
    footer p { margin: 0.5rem 0; }
    #map { width: 100%; height: 400px; border-radius: 10px; border: 1px solid #ccc; margin-top: 10px; margin-bottom: 10px; }
    #route-calc-container { background: #f9f9ff; border: 1px solid #dde; border-radius: 10px; padding: 16px; margin-bottom: 2rem; }
    @media (max-width: 600px) {
      nav ul { flex-direction: column; }
      .language-selector { position: static; margin-bottom: 1rem; text-align: center; }
    }

    header, footer {
      background: #003366;
      color: #fff;
      padding: 0.5rem 0;
      text-align: center;
    }
    .header-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 950px;
      margin: 0 auto;
      padding: 0 4px;
      font-size: 0.97rem;
    }
    .logo-img {
      height: 64px;
    }
    .language-switcher select {
      padding: 0.5rem;
      border-radius: 5px;
      border: none;
    }
    nav ul {
      list-style: none;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 1.5rem;
      padding: 0;
      margin: 0;
      font-size: 0.97rem;
    }
    nav a {
      color: white;
      text-decoration: none;
      font-weight: 400;
      font-size: 0.97rem;
    }
    nav a.active {
      text-decoration: underline;
    }
    @media (max-width: 600px) {
      .header-row {
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
        padding: 0 8px;
      }
      .logo-img {
        height: 64px;
      }
      nav ul {
        flex-direction: column;
        gap: 0.8rem;
      }
    }

    #route-calc-container input[type="text"] {
      width: 80%;
      max-width: 350px;
      min-width: 140px;
      box-sizing: border-box;
      font-size: 1em;
      padding: 0.7em;
    }

    @media (max-width: 700px) {
      #route-calc-container input[type="text"] {
        width: 98%;
        max-width: 99vw;
        font-size: 1.05em;
      }
      #route-calc-container label {
        display: block;
        margin-bottom: 1.1em;
      }
    }

    .private-shuttle-vehicles .vehicle-card img {
      width: 100%;
      max-width: 200px;
      height: auto;
      display: block;
      margin: 0 auto 10px auto;
    }

    @media (max-width: 700px) {
      .private-shuttle-vehicles .vehicle-card img {
        width: 100%;
        max-width: 200px;
      }
    }
  </style>
</head>
<body>

<header>
  <div class="header-row">
    <img src="VIP Ikonos Logo.jpeg" class="logo-img" alt="ShuttlePort Logo">
    <div class="language-switcher">
      <select id="languageSelect" onchange="changeLanguage(this)">
        <option value="private-shuttle-en.html">English ðŸ‡¬ðŸ‡§</option>
        <option value="private-shuttle-ja.html">æ—¥æœ¬èªž ðŸ‡¯ðŸ‡µ</option>
        <option value="private-shuttle-de.html" selected>Deutsch ðŸ‡©ðŸ‡ª</option>
        <option value="private-shuttle-es.html">EspaÃ±ol ðŸ‡ªðŸ‡¸</option>
      </select>
    </div>
  </div>
  <nav>
    <ul>
      <li><a href="index-de.html">VIP Flughafentransfer</a></li>
      <li><a href="city-tours-de.html">Stadttouren</a></li>
      <li><a href="private-shuttle-de.html" class="active">Privater Shuttle</a></li>
      <li><a href="faq-de.html">FAQ</a></li>
    </ul>
  </nav>
</header>

  <section class="hero">
    <h1>Privater Shuttle-Service</h1>
    <p>GenieÃŸen Sie den Luxus privater Reisen mit ShuttlePort. PersÃ¶nlich, professionell und pÃ¼nktlich.</p>
  </section>

<section class="private-shuttle-vehicles">
  <h2>Unsere Fahrzeugflotte</h2>
  <div class="vehicles-list" style="display: flex; flex-wrap: wrap; gap: 30px;">
    <div class="vehicle-card">
      <img src="Sedan Class I.jpeg" alt="Sedan Klasse I" />
      <h4>Sedan Klasse I</h4>
      <p>Bequem und preiswert fÃ¼r bis zu 3 Passagiere.</p>
    </div>
    <div class="vehicle-card">
      <img src="Sedan Class II.jpeg" alt="Sedan Klasse II" />
      <h4>Sedan Klasse II</h4>
      <p>Ideal fÃ¼r Familien, bis zu 6 Personen und GepÃ¤ck.</p>
    </div>
    <div class="vehicle-card">
      <img src="VIP Van.jpeg" alt="VIP Van" />
      <h4>VIP Van</h4>
      <p>Luxus fÃ¼r GeschÃ¤fts- oder Urlaubsreisen, bis zu 7 Personen.</p>
    </div>
    <div class="vehicle-card">
      <img src="Minibus.jpeg" alt="Minibus" />
      <h4>Minibus</h4>
      <p>GerÃ¤umig, stilvoll, perfekt fÃ¼r Gruppenabenteuer.</p>
    </div>
    <div class="vehicle-card">
      <img src="VIP Bus.jpeg" alt="VIP Bus" />
      <h4>VIP Bus</h4>
      <p>Ideal fÃ¼r groÃŸe Gruppen, bis zu 14 Passagiere.</p>
    </div>
  </div>
</section>

<section class="shuttle-destinations" style="margin-top:2rem;">
  <h2>Beliebte Shuttle-Reiseziele</h2>
  <ul>
    <li><b>Istanbul:</b> <a href="https://muze.gen.tr/muze-detay/ayasofya" target="_blank">Hagia Sophia</a> â€“ Erleben Sie das Herz von Istanbul ganz bequem.</li>
    <li><b>Antalya:</b> <a href="https://www.dudenwaterfalls.com/" target="_blank">DÃ¼den WasserfÃ¤lle</a> â€“ NaturschÃ¶nheit nur eine Fahrt entfernt.</li>
    <li><b>Izmir:</b> <a href="https://www.agoraism.com/" target="_blank">Agora Freilichtmuseum</a> â€“ Alte Geschichte direkt vor der TÃ¼r.</li>
  
    <li><b>MuÄŸla (Dalaman):</b> <a href="https://www.oludenizbeach.com/" target="_blank">Ã–lÃ¼deniz Strand</a> â€“ Entspannen Sie an der tÃ¼rkisfarbenen KÃ¼ste.</li>
  </ul>
</section>
  
  <section class="about-private-shuttle">
    <h2>Warum unser privater Shuttle?</h2>
    <p>Unser Shuttle-Service bietet Ihnen maximale FlexibilitÃ¤t und Komfort. Egal ob GeschÃ¤ftsreise, Urlaub oder ein besonderer Anlass â€“ wir bieten nahtlosen TÃ¼r-zu-TÃ¼r-Transport mit professionellen Fahrern und Premiumfahrzeugen.</p>
    <ul>
      <li>Individuelle Abhol- und Zielorte</li>
      <li>24/7 ServiceverfÃ¼gbarkeit</li>
      <li>LuxuriÃ¶se und desinfizierte Fahrzeuge</li>
      <li>Deutsch- und englischsprachige Fahrer</li>
      <li>Feste und transparente Preise</li>
    </ul>
  </section>

  <!-- ROUTE & PRICE CALCULATOR -->
  <section id="route-calc-container">
    <h2>Berechnen Sie Ihre Route & Ihren Preis</h2>
    <div style="margin:10px 0 20px 0;">
      <label>Abholadresse: 
        <input type="text" id="pickup" placeholder="Abholadresse eingeben oder auf Karte klicken" autocomplete="off">
      </label>
      <br>
      <label>Zieladresse: 
        <input type="text" id="dropoff" placeholder="Zieladresse eingeben oder auf Karte klicken" autocomplete="off">
      </label>
      <br>
      <button type="button" id="calcBtn" onclick="routeAndPrice()">Route & Preis berechnen</button>
    </div>
    <div id="map"></div>
    <div id="result" style="margin-top:15px;font-size:1.2em;"></div>
    <div style="font-size:0.92em;color:#888;">
      <b>Tipp:</b> Sie kÃ¶nnen auf die Karte klicken, um Abhol- und Zielpunkt festzulegen, oder eine Adresse eingeben. Ziehen Sie Marker fÃ¼r Feineinstellungen.
    </div>
  </section>

  <section class="reservation">
    <h2>Privaten Shuttle buchen</h2>
    <form action="https://formsubmit.co/64273ee324c3c564e807981d98151119" method="POST" id="reservationForm">
      <input type="hidden" name="_next" value="https://www.shuttleport.net/thank-you-de.html">
      <input type="text" name="name" placeholder="VollstÃ¤ndiger Name" required>
      <input type="email" name="email" placeholder="E-Mail-Adresse" required>
      <input type="tel" name="phone" placeholder="Telefonnummer" required>
      <input type="text" name="pickup" id="form-pickup" placeholder="Abholort" required readonly>
      <input type="text" name="dropoff" id="form-dropoff" placeholder="Zielort" required readonly>
      <input type="text" name="price" id="price" placeholder="Berechneter Preis (â‚¬)" required readonly>
      <input type="datetime-local" name="date" required>
      <textarea name="notes" placeholder="ZusÃ¤tzliche Hinweise (optional)"></textarea>
      <button type="submit" id="submitBtn" disabled>Buchung bestÃ¤tigen</button>
    </form>
  </section>

  <section class="map-section">
    <h2>Unser Einsatzgebiet</h2>
    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d12030.02422744587!2d28.9760189!3d41.0082376!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x14caba8f76d95b7d%3A0x51b88ab6525cb364!2sIstanbul!5e0!3m2!1sen!2str" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
  </section>

  <section class="social-section" style="background-color: #f9f9ff; padding: 2rem 0;">
    <h2 style="text-align: center; font-size: 1.5rem; color: #444;">Folgen Sie unseren Reisen</h2>
    <div style="max-width: 300px; margin: 1rem auto 0 auto; text-align: center;">
      <a href="https://www.instagram.com/vipshuttleport/" target="_blank" style="margin: 0 10px; display: inline-block;">
        <img src="https://cdn-icons-png.flaticon.com/512/1384/1384063.png" alt="Instagram"
             style="width: 32px; height: 32px; transition: transform 0.3s ease;">
      </a>
      <a href="https://www.tiktok.com/@vipshuttleport" target="_blank" style="margin: 0 10px; display: inline-block;">
        <img src="https://cdn-icons-png.flaticon.com/512/3046/3046125.png" alt="TikTok"
             style="width: 32px; height: 32px; transition: transform 0.3s ease;">
      </a>
    </div>
  </section>

  <style>
    .social-section a:hover img {
      transform: scale(1.2);
    }
  </style>

  <footer>
    <div class="footer-links">
      <a href="index-de.html">Startseite</a> |
      <a href="vip-airport-transfer-de.html">VIP Flughafentransfer</a> |
      <a href="city-tours-de.html">Stadttouren</a> |
      <a href="private-shuttle-de.html">Privater Shuttle</a> |
      <a href="faq-de.html">FAQ</a>
    </div>
    <p>&copy; 2025 ShuttlePort. Alle Rechte vorbehalten.</p>
  </footer>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    function changeLanguage(select) {
      const selectedPage = select.value;
      window.location.href = selectedPage;
    }

    // Karte initialisieren
    const map = L.map('map').setView([41.01, 28.98], 11);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);

    let pickupMarker = null, dropoffMarker = null;
    let setPickup = true;

    // Marker per Klick setzen und in die Felder schreiben
    map.on('click', function(e) {
      if (setPickup) {
        if (pickupMarker) map.removeLayer(pickupMarker);
        pickupMarker = L.marker(e.latlng, {draggable:true}).addTo(map).bindPopup('Abholung').openPopup();
        document.getElementById('pickup').value = `${e.latlng.lat},${e.latlng.lng}`;
        setPickup = false;
        pickupMarker.on('dragend', function(ev) {
          var pos = ev.target.getLatLng();
          document.getElementById('pickup').value = `${pos.lat},${pos.lng}`;
        });
      } else {
        if (dropoffMarker) map.removeLayer(dropoffMarker);
        dropoffMarker = L.marker(e.latlng, {draggable:true}).addTo(map).bindPopup('Ziel').openPopup();
        document.getElementById('dropoff').value = `${e.latlng.lat},${e.latlng.lng}`;
        setPickup = true;
        dropoffMarker.on('dragend', function(ev) {
          var pos = ev.target.getLatLng();
          document.getElementById('dropoff').value = `${pos.lat},${pos.lng}`;
        });
      }
    });

    // Geocoding: Adresse in Koordinaten umwandeln
    async function addressToCoords(address) {
      const url = `/api/geocode?text=${encodeURIComponent(address)}`;
      const res = await fetch(url);
      const data = await res.json();
      if(data && data.features && data.features.length > 0) {
        return data.features[0].geometry.coordinates; // [lng, lat]
      }
      throw new Error("Adresse nicht gefunden");
    }

    async function routeAndPrice() {
      let pickup = document.getElementById('pickup').value.trim();
      let dropoff = document.getElementById('dropoff').value.trim();
      let pickupCoords, dropoffCoords;
      const submitBtn = document.getElementById('submitBtn');
      submitBtn.disabled = true;

      try {
        // Wenn Benutzer Koordinaten eingibt: [lat, lng] â†’ [lng, lat] umwandeln
        if (pickup.includes(',') && pickup.split(',').length === 2) {
          let arr = pickup.split(',').map(Number);
          pickupCoords = [arr[1], arr[0]];
        } else {
          pickupCoords = await addressToCoords(pickup); // [lng, lat]
        }
        if (dropoff.includes(',') && dropoff.split(',').length === 2) {
          let arr = dropoff.split(',').map(Number);
          dropoffCoords = [arr[1], arr[0]];
        } else {
          dropoffCoords = await addressToCoords(dropoff); // [lng, lat]
        }

        // Post body korrekt bauen
        const url = "/api/route";
        const body = {
          coordinates: [
            pickupCoords,
            dropoffCoords
          ]
        };

        const res = await fetch(url, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(body)
        });
        const data = await res.json();

        if(data && data.routes && data.routes.length > 0) {
            // Route anzeigen und Preis berechnen
            const distance_km = data.routes[0].summary.distance / 1000;
            const base_price = Math.max(25, distance_km * 1.5);

            document.getElementById('result').innerHTML = `
              <b>Distanz:</b> ${distance_km.toFixed(1)} km<br>
              <b>Preis (geschÃ¤tzt):</b> â‚¬${base_price.toFixed(2)}
            `;
            document.getElementById('price').value = base_price.toFixed(2) + ' â‚¬';
            document.getElementById('form-pickup').value = document.getElementById('pickup').value;
            document.getElementById('form-dropoff').value = document.getElementById('dropoff').value;
            submitBtn.disabled = false;
        } else {
            document.getElementById('result').innerHTML = "Route nicht gefunden.";
            document.getElementById('price').value = '';
            submitBtn.disabled = true;
        }
      } catch (err) {
        document.getElementById('result').innerHTML = "Fehler: " + err.message;
        document.getElementById('price').value = '';
        submitBtn.disabled = true;
      }
    }

    // Sendeformular blockieren, falls kein Preis berechnet ist (Extra-Sicherheit)
    document.getElementById('reservationForm').addEventListener('submit', function(e) {
      if (!document.getElementById('price').value) {
        alert('Bitte berechnen Sie zuerst Ihre Route und den Preis, bevor Sie die Buchung bestÃ¤tigen.');
        e.preventDefault();
      }
    });
  </script>
</body>
</html>
